import Link from 'next/link'
import useSWR from 'swr'
import axios from 'axios'


const fetcher = url => axios.get(url).then(r => r.data)


export default function Home() {
const { data: internships } = useSWR(`${process.env.NEXT_PUBLIC_API_BASE}/internships/public`, fetcher)


return (
<main className="min-h-screen bg-gradient-to-br from-sky-50 to-white p-6">
<div className="max-w-6xl mx-auto">
<header className="flex items-center justify-between py-6">
<h1 className="text-3xl font-bold">InternBridge</h1>
<nav>
<Link href="/dashboard"><a className="px-4 py-2 bg-blue-600 text-white rounded">Dashboard</a></Link>
</nav>
</header>


<section className="mt-8">
<h2 className="text-2xl font-semibold mb-4">Featured internships</h2>
<div className="grid grid-cols-1 md:grid-cols-3 gap-4">
{internships?.slice(0,6).map(job => (
<article key={job.id} className="p-4 border rounded bg-white shadow-sm">
<h3 className="font-semibold">{job.title}</h3>
<p className="text-sm text-gray-600">{job.company}</p>
<p className="mt-2 text-sm">{job.description?.slice(0,120)}...</p>
<div className="mt-3 flex justify-between items-center">
<span className="text-xs text-gray-500">Credits: {job.credits || 0}</span>
<a href={`mailto:${job.contact_email}`} className="text-sm text-blue-600">Apply</a>
</div>
</article>
))}
</div>
</section>
</div>
</main>
)
}